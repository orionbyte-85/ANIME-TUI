<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ Anime Streaming</title>

    <!-- Video.js for advanced video playback -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üé¨ Anime Streaming</h1>
            <p class="subtitle">Multi-Provider Anime Search & Streaming</p>
        </header>

        <!-- Provider Selection -->
        <section id="provider-section" class="section">
            <h2>Select Provider</h2>
            <div id="providers" class="provider-grid"></div>
        </section>

        <!-- Search Section -->
        <section id="search-section" class="section hidden">
            <div class="search-header">
                <button onclick="backToProviders()" class="btn-back">‚Üê Back</button>
                <h2 id="selected-provider-name"></h2>
            </div>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search anime..." />
                <button onclick="searchAnime()" class="btn-primary">Search</button>
            </div>
            <div id="search-results" class="results-grid"></div>
        </section>

        <!-- Episodes Section -->
        <section id="episodes-section" class="section hidden">
            <div class="search-header">
                <button onclick="backToSearch()" class="btn-back">‚Üê Back</button>
                <h2 id="anime-title"></h2>
            </div>
            <div id="episodes-list" class="episodes-list"></div>
        </section>

        <!-- Servers Section -->
        <section id="servers-section" class="section hidden">
            <div class="search-header">
                <button onclick="backToEpisodes()" class="btn-back">‚Üê Back</button>
                <h2 id="episode-title"></h2>
            </div>
            <div id="servers-list" class="servers-list"></div>
        </section>

        <!-- Video Player Section -->
        <section id="player-section" class="section hidden">
            <div class="search-header">
                <button onclick="backToServers()" class="btn-back">‚Üê Back</button>
                <h2 id="now-playing-title">Now Playing</h2>
            </div>
            <div class="video-container">
                <!-- Video.js player -->
                <video id="video-player" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto"
                    width="100%" height="500">
                    <p class="vjs-no-js">
                        To view this video please enable JavaScript
                    </p>
                </video>

                <!-- Iframe fallback for embed players -->
                <iframe id="iframe-player" class="hidden" width="100%" height="500" frameborder="0"
                    referrerpolicy="no-referrer-when-downgrade"
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms" allowfullscreen>
                </iframe>
            </div>
        </section>

        <!-- Loading Overlay -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>